<%- include('partials/head', { 
    title: 'Create Account - Velink',
    description: 'Join Velink and create your personalized link-in-bio page. Get started for free!',
    bodyClass: 'auth-page',
    pageCSS: ['register.css']
}) %>

<%- include('partials/navigation') %>

<main class="auth-main">
    <%- include('partials/alerts') %>
    
    <div class="auth-container">
        <!-- Hero Section -->
        <div class="auth-hero">
            <div class="hero-content">
                <div class="hero-logo">
                    <img src="/img/logo/fresh/white_purple_rounded.png" alt="Velink" />
                </div>
                <h1>Join Velink Today</h1>
                <p>Create your personalized link-in-bio page in minutes. Share all your content from one beautiful page.</p>
                <div class="hero-features">
                    <div class="feature">
                        <i class="bi bi-rocket-takeoff"></i>
                        <span>Quick setup</span>
                    </div>
                    <div class="feature">
                        <i class="bi bi-palette"></i>
                        <span>Customizable design</span>
                    </div>
                    <div class="feature">
                        <i class="bi bi-graph-up"></i>
                        <span>Analytics included</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Section -->
        <div class="auth-form-section">
            <div class="form-container">
                <div class="form-header">
                    <h2>Create Account</h2>
                    <p>Get started with your free Velink account</p>
                </div>

                <form id="registerForm" action="/register" method="POST" novalidate>
                    <!-- Step 1: Basic Info -->
                    <div class="form-step step-1 active">
                        <div class="form-group">
                            <label for="username">Choose Username</label>
                            <div class="input-group">
                                <i class="bi bi-person"></i>
                                <input 
                                    type="text" 
                                    id="username" 
                                    name="username" 
                                    required 
                                    minlength="3"
                                    maxlength="20"
                                    pattern="^[a-zA-Z0-9_-]+$"
                                    autocomplete="username"
                                    placeholder="Choose your unique username"
                                />
                            </div>
                            <div class="field-feedback"></div>
                            <small class="field-hint">Your unique URL will be velink.me/<span id="usernamePreview">username</span></small>
                        </div>

                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <div class="input-group">
                                <i class="bi bi-envelope"></i>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email" 
                                    required 
                                    autocomplete="email"
                                    placeholder="Enter your email address"
                                />
                            </div>
                            <div class="field-feedback"></div>
                        </div>

                        <button type="button" class="btn btn-primary btn-lg" id="nextBtn">
                            Continue
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>

                    <!-- Step 2: Password -->
                    <div class="form-step step-2">
                        <div class="form-group">
                            <label for="password">Create Password</label>
                            <div class="input-group">
                                <i class="bi bi-lock"></i>
                                <input 
                                    type="password" 
                                    id="password" 
                                    name="password" 
                                    required 
                                    minlength="8"
                                    autocomplete="new-password"
                                    placeholder="Create a strong password"
                                />
                                <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                                    <i class="bi bi-eye"></i>
                                </button>
                            </div>
                            <div class="field-feedback"></div>
                            <div class="password-strength" id="passwordStrength"></div>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <div class="input-group">
                                <i class="bi bi-lock-fill"></i>
                                <input 
                                    type="password" 
                                    id="confirmPassword" 
                                    name="confirmPassword" 
                                    required 
                                    autocomplete="new-password"
                                    placeholder="Confirm your password"
                                />
                            </div>
                            <div class="field-feedback"></div>
                        </div>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="terms" required />
                                <span class="checkmark"></span>
                                I agree to the <a href="/nutzungsbedingungen" target="_blank">Terms of Service</a> and <a href="/datenschutz" target="_blank">Privacy Policy</a>
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="newsletter" />
                                <span class="checkmark"></span>
                                Send me updates about new features and tips
                            </label>
                        </div>

                        <button type="submit" class="btn btn-primary btn-lg">
                            Create Account
                            <i class="bi bi-rocket-takeoff"></i>
                        </button>
                        
                        <button type="button" class="btn btn-ghost back-btn" id="backBtn">
                            <i class="bi bi-arrow-left"></i>
                            Back
                        </button>
                    </div>
                </form>

                <!-- Social Login -->
                <div class="divider">
                    <span>or sign up with</span>
                </div>

                <div class="social-login">
                    <button type="button" class="btn btn-secondary social-btn" title="Sign up with Google">
                        <i class="bi bi-google"></i>
                        Google
                    </button>
                    <button type="button" class="btn btn-secondary social-btn" title="Sign up with GitHub">
                        <i class="bi bi-github"></i>
                        GitHub
                    </button>
                </div>

                <!-- Login Link -->
                <div class="auth-switch">
                    <p>Already have an account? <a href="/login">Sign in here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" hidden>
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Creating your account...</p>
        </div>
    </div>
</main>

<%- include('partials/footer', { 
    pageJS: ['form-validator.js', 'register.js'] 
}) %>
